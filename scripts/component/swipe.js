define([],function(){function a(n,f){var g=function(){};var v=function(D){setTimeout(D||g,0)};var C={addEventListener:!!window.addEventListener,touch:("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch,transitions:(function(D){var F=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var E in F){if(D.style[F[E]]!==undefined){return true}}return false})(document.createElement("swipe"))};if(!n){return}var d=n.children[0];var t,e,s,h;f=f||{};var l=parseInt(f.startSlide,10)||0;var w=f.speed||300;f.continuous=f.continuous!==undefined?f.continuous:true;function o(){t=d.children;h=t.length;if(t.length<2){f.continuous=false}if(C.transitions&&f.continuous&&t.length<3){d.appendChild(t[0].cloneNode(true));d.appendChild(d.children[1].cloneNode(true));t=d.children}e=new Array(t.length);s=n.getBoundingClientRect().width||n.offsetWidth;d.style.width=(t.length*s)+"px";var E=t.length;while(E--){var D=t[E];D.style.width=s+"px";D.setAttribute("data-index",E);if(C.transitions){D.style.left=(E*-s)+"px";r(E,l>E?-s:(l<E?s:0),0)}}if(f.continuous&&C.transitions){r(j(l-1),-s,0);r(j(l+1),s,0)}if(!C.transitions){d.style.left=(l*-s)+"px"}n.style.visibility="visible"}function p(){if(f.continuous){b(l-1)}else{if(l){b(l-1)}}}function q(){if(f.continuous){b(l+1)}else{if(l<t.length-1){b(l+1)}}}function j(D){return(t.length+(D%t.length))%t.length}function b(H,E){if(l==H){return}if(C.transitions){var G=Math.abs(l-H)/(l-H);if(f.continuous){var D=G;G=-e[j(H)]/s;if(G!==D){H=-G*t.length+H}}var F=Math.abs(l-H)-1;while(F--){r(j((H>l?H:l)-F-1),s*G,0)}H=j(H);r(l,s*G,E||w);r(H,0,E||w);if(f.continuous){r(j(H-G),-(s*G),0)}}else{H=j(H);k(l*-s,H*-s,E||w)}l=H;v(f.callback&&f.callback(l,t[l]))}function r(D,F,E){m(D,F,E);e[D]=F}function m(E,H,G){var D=t[E];var F=D&&D.style;if(!F){return}F.webkitTransitionDuration=F.MozTransitionDuration=F.msTransitionDuration=F.OTransitionDuration=F.transitionDuration=G+"ms";F.webkitTransform="translate("+H+"px,0)"+"translateZ(0)";F.msTransform=F.MozTransform=F.OTransform="translateX("+H+"px)"}function k(H,G,D){if(!D){d.style.left=G+"px";return}var F=+new Date;var E=setInterval(function(){var I=+new Date-F;if(I>D){d.style.left=G+"px";if(B){y()}f.transitionEnd&&f.transitionEnd.call(event,l,t[l]);clearInterval(E);return}d.style.left=(((G-H)*(Math.floor((I/D)*100)/100))+H)+"px"},4)}var B=f.auto||0;var x;function y(){x=setTimeout(q,B)}function u(){B=0;clearTimeout(x)}var i={};var z={};var A;var c={handleEvent:function(D){switch(D.type){case"touchstart":this.start(D);break;case"touchmove":this.move(D);break;case"touchend":v(this.end(D));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":v(this.transitionEnd(D));break;case"resize":v(o);break}if(f.stopPropagation){D.stopPropagation()}},start:function(D){var E=D.touches[0];i={x:E.pageX,y:E.pageY,time:+new Date};A=undefined;z={};d.addEventListener("touchmove",this,false);d.addEventListener("touchend",this,false)},move:function(D){if(D.touches.length>1||D.scale&&D.scale!==1){return}if(f.disableScroll){D.preventDefault()}var E=D.touches[0];z={x:E.pageX-i.x,y:E.pageY-i.y};if(typeof A=="undefined"){A=!!(A||Math.abs(z.x)<Math.abs(z.y))}if(!A){D.preventDefault();u();if(f.continuous){m(j(l-1),z.x+e[j(l-1)],0);m(l,z.x+e[l],0);m(j(l+1),z.x+e[j(l+1)],0)}else{z.x=z.x/((!l&&z.x>0||l==t.length-1&&z.x<0)?(Math.abs(z.x)/s+1):1);m(l-1,z.x+e[l-1],0);m(l,z.x+e[l],0);m(l+1,z.x+e[l+1],0)}}},end:function(F){var H=+new Date-i.time;var E=Number(H)<250&&Math.abs(z.x)>20||Math.abs(z.x)>s/2;var D=!l&&z.x>0||l==t.length-1&&z.x<0;if(f.continuous){D=false}var G=z.x<0;if(!A){if(E&&!D){if(G){if(f.continuous){r(j(l-1),-s,0);r(j(l+2),s,0)}else{r(l-1,-s,0)}r(l,e[l]-s,w);r(j(l+1),e[j(l+1)]-s,w);l=j(l+1)}else{if(f.continuous){r(j(l+1),s,0);r(j(l-2),-s,0)}else{r(l+1,s,0)}r(l,e[l]+s,w);r(j(l-1),e[j(l-1)]+s,w);l=j(l-1)}f.callback&&f.callback(l,t[l])}else{if(f.continuous){r(j(l-1),-s,w);r(l,0,w);r(j(l+1),s,w)}else{r(l-1,-s,w);r(l,0,w);r(l+1,s,w)}}}d.removeEventListener("touchmove",c,false);d.removeEventListener("touchend",c,false)},transitionEnd:function(D){if(parseInt(D.target.getAttribute("data-index"),10)==l){if(B){y()}f.transitionEnd&&f.transitionEnd.call(D,l,t[l])}}};o();if(B){y()}if(C.addEventListener){if(C.touch){d.addEventListener("touchstart",c,false)}if(C.transitions){d.addEventListener("webkitTransitionEnd",c,false);d.addEventListener("msTransitionEnd",c,false);d.addEventListener("oTransitionEnd",c,false);d.addEventListener("otransitionend",c,false);d.addEventListener("transitionend",c,false)}window.addEventListener("resize",c,false)}else{window.onresize=function(){o()}}return{setup:function(){o()},slide:function(E,D){u();b(E,D)},prev:function(){u();p()},next:function(){u();q()},stop:function(){u()},getPos:function(){return l},getNumSlides:function(){return h},kill:function(){u();d.style.width="";d.style.left="";var E=t.length;while(E--){var D=t[E];D.style.width="";D.style.left="";
  if(C.transitions){m(E,0,0)}}if(C.addEventListener){d.removeEventListener("touchstart",c,false);d.removeEventListener("webkitTransitionEnd",c,false);d.removeEventListener("msTransitionEnd",c,false);d.removeEventListener("oTransitionEnd",c,false);d.removeEventListener("otransitionend",c,false);d.removeEventListener("transitionend",c,false);window.removeEventListener("resize",c,false)}else{window.onresize=null}}}}return a});